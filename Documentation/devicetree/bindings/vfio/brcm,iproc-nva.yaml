# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
# Copyright 2021 Broadcom
%YAML 1.2
---
$id: http://devicetree.org/schemas/soc/bcm/brcm,iproc-nva.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: NVMe processing accelerator for Broadcom SoCs emulating NVMe controller.

maintainers:
  - Guru Prasad <guru.prasad@broadcom.com>

description:
  The Broadcom NVA unit provide hardware acceleration for emulated NVMe
  controllers on Broadcom Smartnic SoCs. It supports Single Root I/O
  Virtualization, implements a per-VC (virtual controller) NVMe controller
  registers and offloads NVMe queue management and scheduling functions for
  NVMe admin/IO queues.

properties:
  compatible:
  const: brcm,iproc-nva

  reg:
    maxItems: 1

  iommus:
    maxItems: 1

  msi-parent: true

  dma-coherent: true

required:
  - compatible
  - reg
  - iommus

additionalProperties: false

examples:
  -

    nva: nva@0 {
        compatible = "brcm,iproc-nva";
        reg = <0x00000000 0x1000000>;
        msi-parent = <&gic_its9 0xfc000>;
        dma-coherent;
        iommus = <&smmu 0xfc000>;
    };
