// SPDX-License-Identifier: (GPL-2.0 or BSD-3-Clause)
/*
 *  Copyright(c) 2020 Broadcom
 */

/dts-v1/;

#define NUM_CRYPTO	32
#define NUM_RAID	0
#define ENABLE_ENET	0
#define ENABLE_MDIO	0
#define ENABLE_USB1	0
#define ENABLE_I2C0	1
#define ENABLE_I2C1	1
#define ENABLE_SSP0	1
#define ENABLE_SSP1	1
#define ENABLE_PAXB_IOMMU	1
#define ENABLE_PAXC_IOMMU	1

#ifndef NUM_PAXB
#define NUM_PAXB	1
#define ENABLE_PCIE7	1
#endif

#include "stingray-board-base.dtsi"

/ {
	model = "Glass Creek B0 w/PCIe IOMMU (BCM958804A8043C)";

	chosen {
		stdout-path = "serial1:115200n8";
	};
};

&sdio0 {
	no-1-8-v;
};

&uart0 {
	status = "okay";
};

&pcie7 {
	msi-map = <0x0000 &gic_its 0x1c00 0x400>;
#if (ENABLE_PAXB_IOMMU == 1)
	iommu-map = <0x0000 &smmu 0x1c00 0x400>;
#endif
};

&qspi {
	/* enable to access FPGA SPI flash */
	status = "okay";

	spiflash: mt25qu01g@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "jedec,spi-nor";
		reg = <0x0>;
		spi-max-frequency = <12500000>;
	};
};

&i2c1 {
	bmc@40000035 {
		compatible = "i2c-slave-bmc";
		reg = <0x40000035>;
		/* name of thermal zone */
		bmc-thermal-zone = "ihost0-thermal";
	};
};
