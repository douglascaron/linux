// SPDX-License-Identifier: (GPL-2.0 or BSD-3-Clause)
/*
 *  Copyright(c) 2020 Broadcom
 */

#include <dt-bindings/interrupt-controller/arm-gic.h>

/ {
	compatible = "brcm,stingray2";
	interrupt-parent = <&gic>;
	#address-cells = <2>;
	#size-cells = <2>;
	dma-ranges = <0x0 0x0 0x0 0x0 0x100 0x0>;

	cpus {
		#address-cells = <2>;
		#size-cells = <0>;

		cpu@0 {
			device_type = "cpu";
			compatible = "arm,armv8";
			reg = <0x0 0x0>;
		};
	};

	timer {
		compatible = "arm,armv8-timer";
		interrupts = <GIC_PPI 13 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 14 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 11 IRQ_TYPE_LEVEL_LOW>,
			     <GIC_PPI 10 IRQ_TYPE_LEVEL_LOW>;
	};

	scr {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <1>;
		ranges = <0x0 0x0 0x50000000 0x07000000>;

		gic: interrupt-controller@4000000 {
			compatible = "arm,gic-v3";
			#interrupt-cells = <3>;
			#address-cells = <1>;
			#size-cells = <1>;
			ranges;
			interrupt-controller;
			reg = <0x4000000 0x010000>, /* GICD */
			      <0x4180000 0x1800000>; /* GICR */
			interrupts = <GIC_PPI 9 IRQ_TYPE_LEVEL_HIGH>;
		};
	};

	#include "stingray2-clock.dtsi"

	hsls {
		compatible = "simple-bus";
		dma-ranges;
		#address-cells = <1>;
		#size-cells = <1>;
		ranges = <0x0 0x0 0x68900000 0x17700000>;

		timer0: timer@30000 {
			compatible = "arm,sp804", "arm,primecell";
			reg = <0x00030000 0x1000>;
			interrupts = <GIC_SPI 176 IRQ_TYPE_LEVEL_HIGH>;
			clocks = <&timer0_clk>;
			clock-names = "apb_pclk";
			status = "disabled";
		};

		uart1: uart@110000 {
			device_type = "serial";
			compatible = "arm,pl011", "arm,primecell";
			reg = <0x00110000 0x1000>;
			clocks = <&pl011_clk>, <&apb_clk>;
			clock-names = "pl011_clk", "apb_pclk";
			interrupt-parent = <&gic>;
			interrupts = <GIC_SPI 171 IRQ_TYPE_LEVEL_HIGH>;
		};
	};

	mmc {
		compatible = "simple-bus";
		dma-ranges;
		#address-cells = <1>;
		#size-cells = <1>;
		ranges = <0x0 0x0 0x63200000 0x100000>;

		sdio0: sdhci@90000 {
			compatible = "brcm,sdhci-iproc";
			reg = <0x90000 0x100>;
			interrupts = <GIC_SPI 227 IRQ_TYPE_LEVEL_HIGH>;
			bus-width = <8>;
			clocks = <&sdio0_clk>;
			status = "disabled";
		};

		sdio1: sdhci@80000 {
			compatible = "brcm,sdhci-iproc";
			reg = <0x80000 0x100>;
			interrupts = <GIC_SPI 228 IRQ_TYPE_LEVEL_HIGH>;
			bus-width = <8>;
			clocks = <&sdio1_clk>;
			status = "disabled";
		};
	};
};
